(self["webpackChunkbanner_generator"]=self["webpackChunkbanner_generator"]||[]).push([[653],{3639:function(e){
/*! dom-to-image-more-v2 22-11-2021 */
!function(t){"use strict";var n={escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:r,mimeType:function(e){return e=r(e).toLowerCase(),function(){var e="application/font-woff",t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[e]||""},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):function(e){return new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);t(new Blob([o],{type:"image/png"}))}))}(e)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(e){return m.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise((function(t){var n,r,o=new XMLHttpRequest;function i(e){console.error(e),t("")}o.onreadystatechange=function(){var r;4===o.readyState&&(200===o.status?((r=new FileReader).onloadend=function(){var e=r.result.split(/,/)[1];t(e)},r.readAsDataURL(o.response)):n?t(n):i("cannot fetch resource: "+e+", status: "+o.status))},o.ontimeout=function(){n?t(n):i("timeout of 30000ms occured while fetching resource: "+e)},o.responseType="blob",o.timeout=3e4,m.impl.options.useCredentials&&(o.withCredentials=!0),o.open("GET",e,!0),o.send(),!m.impl.options.imagePlaceholder||(r=m.impl.options.imagePlaceholder.split(/,/))&&r[1]&&(n=r[1])}))},uid:function(){var e=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}}(),delay:function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return"data:,"===e?Promise.resolve():new Promise((function(t,n){var r=new Image;m.impl.options.useCredentials&&(r.crossOrigin="use-credentials"),r.onload=function(){t(r)},r.onerror=n,r.src=e}))},width:function(e){var t=o(e,"border-left-width"),n=o(e,"border-right-width");return e.scrollWidth+t+n},height:function(e){var t=o(e,"border-top-width"),n=o(e,"border-bottom-width");return e.scrollHeight+t+n}};function r(e){return e=/\.([^\.\/]*?)(\?|$)/g.exec(e),e?e[1]:""}function o(e,t){return t=window.getComputedStyle(e).getPropertyValue(t),parseFloat(t.replace("px",""))}var i,a={inlineAll:function(e,t,n){return l(e)?Promise.resolve(e).then(s).then((function(r){var o=Promise.resolve(e);return r.forEach((function(e){o=o.then((function(r){return c(r,e,t,n)}))})),o})):Promise.resolve(e)},shouldProcess:l,impl:{readUrls:s,inline:c}};function l(e){return-1!==e.search(i)}function s(e){for(var t,r=[];null!==(t=i.exec(e));)r.push(t[1]);return r.filter((function(e){return!n.isDataUrl(e)}))}function c(e,t,r,o){return Promise.resolve(t).then((function(e){return r?n.resolveUrl(e,r):e})).then(o||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t))})).then((function(r){return e.replace(new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g"),"$1"+r+"$3")}))}var u={resolveAll:function(){return f().then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:f}};function f(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(r){if(Object.getPrototypeOf(r).hasOwnProperty("cssRules"))try{n.asArray(r.cssRules||[]).forEach(t.push.bind(t))}catch(e){console.log("Error while reading CSS rules from "+r.href,e.toString())}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return a.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(t){return t.map(e)}));function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return a.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}var d={inlineAll:function e(t){return t instanceof Element?r(t).then((function(){return t instanceof HTMLImageElement?h(t).inline():Promise.all(n.asArray(t.childNodes).map((function(t){return e(t)})))})):Promise.resolve(t);function r(e){var t=e.style.getPropertyValue("background");return t?a.inlineAll(t).then((function(n){e.style.setProperty("background",n,t)})).then((function(){return e})):Promise.resolve(e)}},impl:{newImage:h}};function h(e){return{inline:function(t){return n.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e.src))})).then((function(t){return new Promise((function(n){e.onload=n,e.onerror=n,e.src=t}))}))}}}var p={imagePlaceholder:void 0,cacheBust:!(i=/url\(['"]?([^'"]+?)['"]?\)/g),useCredentials:!1},m={toSvg:g,toPng:function(e,t){return(t=t||{}).raster=!0,v(e,t).then((function(e){return e.toDataURL()}))},toJpeg:function(e,t){return(t=t||{}).raster=!0,v(e,t).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))},toBlob:function(e,t){return(t=t||{}).raster=!0,v(e,t).then(n.canvasToBlob)},toPixelData:function(e,t){return(t=t||{}).raster=!0,v(e,t).then((function(t){return t.getContext("2d").getImageData(0,0,n.width(e),n.height(e)).data}))},toCanvas:function(e,t){return v(e,t||{})},impl:{fontFaces:u,images:d,util:n,inliner:a,options:{}}};function g(e,t){return function(e){void 0===e.imagePlaceholder?m.impl.options.imagePlaceholder=p.imagePlaceholder:m.impl.options.imagePlaceholder=e.imagePlaceholder,void 0===e.cacheBust?m.impl.options.cacheBust=p.cacheBust:m.impl.options.cacheBust=e.cacheBust,void 0===e.useCredentials?m.impl.options.useCredentials=p.useCredentials:m.impl.options.useCredentials=e.useCredentials}(t=t||{}),Promise.resolve(e).then((function(e){return function e(t,r,o,i){return o||!r||r(t)?Promise.resolve(t).then(a).then((function(e){return l(t,e)})).then((function(e){return s(t,e,i)})):Promise.resolve();function a(e){return e instanceof HTMLCanvasElement?n.makeImage(e.toDataURL()):"IFRAME"===e.nodeName?html2canvas(e.contentDocument.body).then((e=>e.toDataURL())).then(n.makeImage):e.cloneNode(!1)}function l(t,o){return t=t.childNodes,0===t.length?Promise.resolve(o):a(o,n.asArray(t)).then((function(){return o}));function a(t,n){var o=Promise.resolve();return n.forEach((function(n){o=o.then((function(){return e(n,r,!1,i)})).then((function(e){e&&t.appendChild(e)}))})),o}}function s(e,t,r){return t instanceof Element?Promise.resolve().then(i).then(a).then(l).then(s).then((function(){return t})):t;function i(){function i(e,t){t.font=e.font,t.fontFamily=e.fontFamily,t.fontFeatureSettings=e.fontFeatureSettings,t.fontKerning=e.fontKerning,t.fontSize=e.fontSize,t.fontStretch=e.fontStretch,t.fontStyle=e.fontStyle,t.fontVariant=e.fontVariant,t.fontVariantCaps=e.fontVariantCaps,t.fontVariantEastAsian=e.fontVariantEastAsian,t.fontVariantLigatures=e.fontVariantLigatures,t.fontVariantNumeric=e.fontVariantNumeric,t.fontVariationSettings=e.fontVariationSettings,t.fontWeight=e.fontWeight}function a(e,t){function r(e,r){n.asArray(e).forEach((function(t){r.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})),o&&(["inset-block","inset-block-start","inset-block-end"].forEach((e=>t.removeProperty(e))),["left","right","top","bottom"].forEach((e=>{t.getPropertyValue(e)&&t.setProperty(e,"0px")})))}e.cssText?(t.cssText=e.cssText,i(e,t)):r(e,t)}a(r?b(e,o):window.getComputedStyle(e),t.style)}function a(){function r(r){var o,i=window.getComputedStyle(e,r),a=i.getPropertyValue("content");function l(){var e="."+o+":"+r,t=(i.cssText?a:l)();return document.createTextNode(e+"{"+t+"}");function a(){return i.cssText+" content: "+i.getPropertyValue("content")+";"}function l(){return n.asArray(i).map(e).join("; ")+";";function e(e){return e+": "+i.getPropertyValue(e)+(i.getPropertyPriority(e)?" !important":"")}}}""!==a&&"none"!==a&&(o=n.uid(),(a=t.getAttribute("class"))&&t.setAttribute("class",a+" "+o),(a=document.createElement("style")).appendChild(l()),t.appendChild(a))}[":before",":after"].forEach((function(e){r(e)}))}function l(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function s(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)})))}}}(e,t.filter,!0,!t.raster)})).then(y).then(w).then((function(e){t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]}));var n=null;return"function"==typeof t.onclone&&(n=t.onclone(e)),Promise.resolve(n).then((function(){return e}))})).then((function(r){return o=t.width||n.width(e),i=t.height||n.height(e),Promise.resolve(r).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(n.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+i+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}));var o,i}))}function v(e,t){return g(e,t).then(n.makeImage).then(n.delay(100)).then((function(r){var o="number"!=typeof t.scale?1:t.scale,i=function(e,r){var o=document.createElement("canvas");return o.width=(t.width||n.width(e))*r,o.height=(t.height||n.height(e))*r,t.bgcolor&&((r=o.getContext("2d")).fillStyle=t.bgcolor,r.fillRect(0,0,o.width,o.height)),o}(e,o),a=i.getContext("2d");return r&&(a.scale(o,o),a.drawImage(r,0,0)),i}))}function y(e){return u.resolveAll().then((function(t){var n=document.createElement("style");return e.appendChild(n),n.appendChild(document.createTextNode(t)),e}))}function w(e){return d.inlineAll(e).then((function(){return e}))}function b(e,t){for(var n=document.createElement(e.tagName).style,r=window.getComputedStyle(e),o=e.style,i=0;i<r.length;i++){var a=r[i],l=r.getPropertyValue(a),s=o.getPropertyValue(a);o.setProperty(a,t?"initial":"unset"),r.getPropertyValue(a)!==l?n.setProperty(a,l):n.removeProperty(a),o.setProperty(a,s)}return n}e.exports=m}()},1653:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(6252),o=n(9963),i=n(3577);const a=e=>((0,r.dD)("data-v-7c74de0f"),e=e(),(0,r.Cn)(),e),l={class:"container"},s={class:"row align-items-start"},c={class:"col-md-6"},u={class:"mb20"},f=a((()=>(0,r._)("h3",{class:"mb-0"},"上傳檔案",-1))),d={class:"form__editable my20"},h={class:"d-block"},p={class:"label--check"},m=a((()=>(0,r._)("span",{class:"label__check__mark"},null,-1))),g=a((()=>(0,r._)("span",{class:"label__check__txt"},"修改圖片縮放及位置",-1))),v={key:0,class:"bg-gray-100 mt10 p-4"},y={class:"container"},w={class:"row"},b={class:"col-md-6 px-4"},_=a((()=>(0,r._)("h4",{class:"color-secondary-variant my0"},"圖片縮放",-1))),P={class:"row g-4 align-items-center pt-3"},x=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"},[(0,r._)("i",{class:"icon icon-minus"})])],-1))),S={class:"col"},C=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"},[(0,r._)("i",{class:"icon icon-plus"})])],-1))),A={class:"col-md-6 px-4"},E=a((()=>(0,r._)("h4",{class:"color-secondary-variant my0"},"圖片位移",-1))),k={class:"row g-4 align-items-center pt-3"},V=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"}," 左 ")],-1))),T={class:"col"},U=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"}," 右 ")],-1))),R={class:"row g-4 align-items-center pt-3"},D=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"}," 上 ")],-1))),L={class:"col"},j=a((()=>(0,r._)("div",{class:"col-auto text-center"},[(0,r._)("button",{type:"button",class:"btn p-0"}," 下 ")],-1))),F={class:"col-md-6 d-flex flex-column align-items-center"},$=a((()=>(0,r._)("img",{src:"images/mask-cwef-guide.png",alt:"參考線遮罩",class:"mask"},null,-1))),B=["src"],I={class:"text-center mt40"};function M(e,t,n,a,M,N){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",s,[(0,r._)("div",c,[(0,r._)("div",u,[f,(0,r._)("input",{type:"file",name:"Filedata",ref:"Filedata",id:"file_upload",accept:"image/*",onChange:t[0]||(t[0]=e=>N.onFileSelected("file_upload",null,"single"))},null,544),(0,r._)("div",d,[(0,r._)("label",h,[(0,r._)("span",p,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>M.editable.switch=e),name:"啟動修改"},null,512),[[o.e8,M.editable.switch]]),m,g])]),M.editable.switch?((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",y,[(0,r._)("div",w,[(0,r._)("div",b,[_,(0,r._)("div",P,[x,(0,r._)("div",S,[(0,r.wy)((0,r._)("input",{type:"range",class:"form-range","onUpdate:modelValue":t[2]||(t[2]=e=>M.editable.scale=e),min:"-100",id:"customRange1"},null,512),[[o.nr,M.editable.scale]])]),C])]),(0,r._)("div",A,[E,(0,r._)("div",k,[V,(0,r._)("div",T,[(0,r.wy)((0,r._)("input",{type:"range",class:"form-range","onUpdate:modelValue":t[3]||(t[3]=e=>M.editable.horizontal=e),min:"-100",id:"customRange2"},null,512),[[o.nr,M.editable.horizontal]])]),U]),(0,r._)("div",R,[D,(0,r._)("div",L,[(0,r.wy)((0,r._)("input",{type:"range",class:"form-range","onUpdate:modelValue":t[4]||(t[4]=e=>M.editable.vertical=e),min:"-100",id:"customRange3"},null,512),[[o.nr,M.editable.vertical]])]),j])])])])])):(0,r.kq)("",!0)])])]),(0,r._)("div",F,[(0,r._)("div",{id:"preview",class:(0,i.C_)(["cwef-crop bg-secondary-variant",{"object-cover":!M.editable.switch,"object-customized":M.editable.switch}])},[$,(0,r._)("img",{src:M.value.img,alt:"",style:(0,i.j5)(`\n              transform:\n                scale(${1+M.editable.scale/100*2-.01})\n                translateX(${2*M.editable.horizontal}px)\n                translateY(${2*M.editable.vertical}px)\n              ;\n            `)},null,12,B)],2),(0,r._)("div",I,[(0,r._)("button",{type:"button",class:"btn btn--contained",onClick:t[5]||(t[5]=e=>{N.screenshot()})},"下載")])])])])}var N=n(3639),z=n.n(N),q={data(){return{output:{width:500,height:640,ratio:1},value:{img:"https://storage.googleapis.com/www-cw-com-tw/ckeditor/202211/ckeditor-636afd0d569bd.jpg"},editable:{switch:!1,vertical:0,horizontal:0,scale:1}}},methods:{screenshot(){const e=document.querySelector("#preview");document.querySelector(".mask").style.display="none",z().toJpeg(e,{quality:1,width:this.output.width,height:this.output.height,style:{transform:`scale(${this.output.ratio})`,"transform-origin":"top left"}}).then((e=>{let t=new Date;const n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();t=`${o}${r}${n}`;const i=document.createElement("a");i.href=e,i.download=`cwef-${t}.jpg`,i.click(),document.querySelector(".mask").style.display="block"})).catch((e=>{console.error("oops, something went wrong!",e)}))},onFileSelected(e="file_upload",t=null,n="single"){const r=document.querySelector(`#${e}`).files[0],o=new FileReader;let i;o.onloadend=()=>{i=o.result,this.value.img=i},o.readAsDataURL(r)}}},H=n(3744);const O=(0,H.Z)(q,[["render",M],["__scopeId","data-v-7c74de0f"]]);var X=O}}]);
//# sourceMappingURL=653.ea769e49.js.map